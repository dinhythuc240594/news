{% extends 'base.html' %}
{% block title %}{{ category.name }} - VnNews{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_client.css') }}">
{% endblock %}
{% block content %}
    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="row">
                <!-- Left Content -->
                <div class="col-lg-9">
                    <!-- Breadcrumb -->
                    <nav aria-label="breadcrumb" class="mb-4">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{{ url_for('client.index') }}">Trang chủ</a></li>
                            <li class="breadcrumb-item"><a href="{{ url_for('client.category', category_slug=news.category.slug) }}">{{ news.category.name }}</a></li>
                            <li class="breadcrumb-item active" aria-current="page">{{ news.title[:50] }}{% if news.title|length > 50 %}...{% endif %}</li>
                        </ol>
                    </nav>

                    <!-- News Detail -->
                    <article class="news-detail">
                        <div class="news-header mb-4">
                            <span class="badge-category">{{ news.category.name }}</span>
                            <h1 class="news-title">{{ news.title }}</h1>
                            <div class="news-meta mb-3">
                                <span><i class="far fa-clock"></i> {{ (news.published_at or news.created_at)|timeago }}</span>
                                <span><i class="far fa-eye"></i> {{ news.view_count|format_view }}</span>
                                <span><i class="far fa-user"></i> {{ news.creator.full_name if news.creator else 'Admin' }}</span>
                            </div>
                        </div>

                        {% if news.thumbnail %}
                        <div class="news-image mb-4">
                            <img src="{{ news.thumbnail }}" alt="{{ news.title }}" class="img-fluid">
                        </div>
                        {% endif %}

                        {% if news.summary %}
                        <div class="news-summary mb-4">
                            <p class="lead">{{ news.summary }}</p>
                        </div>
                        {% endif %}

                        <div class="news-content">
                            {{ news.content|safe }}
                        </div>

                        <!-- Tags and Share -->
                        <div class="news-footer mt-4 pt-4 border-top">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="share-buttons">
                                        <span class="me-2">Chia sẻ:</span>
                                        <a href="#" class="btn btn-sm btn-outline-primary me-2"><i class="fab fa-facebook-f"></i> Facebook</a>
                                        <a href="#" class="btn btn-sm btn-outline-info me-2"><i class="fab fa-twitter"></i> Twitter</a>
                                        <a href="#" class="btn btn-sm btn-outline-danger"><i class="fab fa-youtube"></i> Copy Link</a>
                                    </div>
                                </div>
                                <div class="col-md-6 text-end">
                                    <a href="{{ url_for('client.category', category_slug=news.category.slug) }}" class="btn btn-outline-secondary">
                                        <i class="fas fa-arrow-left"></i> Về danh mục {{ news.category.name }}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Related News -->
                    {% if related_news %}
                    <section class="related-news mt-5">
                        <h2 class="section-title">
                            <span>Tin liên quan</span>
                        </h2>
                        <div class="row">
                            {% for related in related_news %}
                            <div class="col-md-6 mb-4">
                                <article class="news-card horizontal-card">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <div class="news-image">
                                                <img src="{{ related.thumbnail|default_image }}" alt="{{ related.title }}">
                                                <span class="badge-category">{{ related.category.name }}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="news-content">
                                                <h3 class="news-title">
                                                    <a href="{{ url_for('client.news_detail', news_slug=related.slug) }}">{{ related.title }}</a>
                                                </h3>
                                                <div class="news-meta">
                                                    <span><i class="far fa-clock"></i> {{ (related.published_at or related.created_at)|timeago }}</span>
                                                    <span><i class="far fa-eye"></i> {{ related.view_count|format_view }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            </div>
                            {% endfor %}
                        </div>
                    </section>
                    {% endif %}
                </div>

                <!-- Right Sidebar -->
                <div class="col-lg-3">
                    <!-- Most Read -->
                    <aside class="sidebar-widget">
                        <h3 class="widget-title">
                            <i class="fas fa-fire"></i> Xem nhiều
                        </h3>
                        <div class="most-read-list">
                            <p class="text-muted text-center">Đang tải...</p>
                        </div>
                    </aside>

                    <!-- Ads -->
                    <aside class="sidebar-widget">
                        <div class="ads-box">
                            <span>Quảng cáo</span>
                            <div class="ads-content">
                                300 x 250
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block scripts %}
{% include 'hot_news.html' %}
{% endblock %}

